%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%            fib_large_uc.pl            %
%                                       %
%   Scheduling of a parallel fibonacci  %
% computation on a homogeoneous system  %
%     (uniform communication costs)     %
%                                       %
%       Declarative Programming         %
%              2014-2015                %
%                                       %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%
%%%   Cores  %%%
%%%%%%%%%%%%%%%%
% The cores of the machine
% core(Id): a core with unique identifier 'Id'.
core(c1).
core(c2).
core(c3).
core(c4).
core(c5).
core(c6).
core(c7).
core(c8).

%%%%%%%%%%%%%%%%%%
%%%   Tasks    %%%
%%%%%%%%%%%%%%%%%%
% The tasks the application is made up of, which are to be scheduled.
% task(Id): a task with unique identifier 'Id'.
task(t1).
task(t2).
task(t3).
task(t4).
task(t5).
task(t6).
task(t7).
task(t8).
task(t9).
task(t10).
task(t11).
task(t12).
task(t13).
task(t14).
task(t15).
task(t16).
task(t17).
task(t18).
task(t19).
task(t20).
task(t21).
task(t22).
task(t23).
task(t24).
task(t25).
task(t26).
task(t27).
task(t28).
task(t29).
task(t30).
task(t31).
task(t32).
task(t33).
task(t34).
task(t35).
task(t36).
task(t37).
task(t38).
task(t39).
task(t40).
task(t41).
task(t42).
task(t43).
task(t44).
task(t45).
task(t46).
task(t47).
task(t48).
task(t49).
task(t50).
task(t51).
task(t52).
task(t53).
task(t54).
task(t55).
task(t56).
task(t57).
task(t58).
task(t59).
task(t60).
task(t61).
task(t62).
task(t63).
task(t64).
task(t65).
task(t66).
task(t67).
task(t68).
task(t69).
task(t70).
task(t71).
task(t72).
task(t73).
task(t74).
task(t75).
task(t76).
task(t77).
task(t78).
task(t79).
task(t80).
task(t81).
task(t82).
task(t83).
task(t84).
task(t85).
task(t86).
task(t87).
task(t88).
task(t89).
task(t90).
task(t91).
task(t92).
task(t93).
task(t94).
task(t95).
task(t96).
task(t97).
task(t98).
task(t99).
task(t100).
task(t101).
task(t102).
task(t103).
task(t104).
task(t105).
task(t106).
task(t107).
task(t108).
task(t109).
task(t110).
task(t111).
task(t112).
task(t113).
task(t114).
task(t115).
task(t116).
task(t117).
task(t118).
task(t119).
task(t120).
task(t121).
task(t122).
task(t123).
task(t124).
task(t125).
task(t126).
task(t127).
task(t128).
task(t129).
task(t130).
task(t131).
task(t132).
task(t133).
task(t134).
task(t135).
task(t136).
task(t137).
task(t138).
task(t139).
task(t140).
task(t141).
task(t142).
task(t143).
task(t144).
task(t145).
task(t146).
task(t147).
task(t148).
task(t149).
task(t150).
task(t151).
task(t152).
task(t153).
task(t154).
task(t155).
task(t156).
task(t157).
task(t158).
task(t159).
task(t160).
task(t161).
task(t162).
task(t163).
task(t164).
task(t165).
task(t166).
task(t167).
task(t168).
task(t169).
task(t170).
task(t171).
task(t172).
task(t173).
task(t174).
task(t175).
task(t176).
task(t177).
task(t178).
task(t179).
task(t180).
task(t181).
task(t182).
task(t183).
task(t184).
task(t185).
task(t186).
task(t187).
task(t188).
task(t189).
task(t190).
task(t191).
task(t192).
task(t193).
task(t194).
task(t195).
task(t196).
task(t197).
task(t198).
task(t199).
task(t200).
task(t201).
task(t202).
task(t203).
task(t204).
task(t205).
task(t206).
task(t207).
task(t208).
task(t209).
task(t210).
task(t211).
task(t212).
task(t213).
task(t214).
task(t215).
task(t216).
task(t217).
task(t218).
task(t219).
task(t220).
task(t221).
task(t222).
task(t223).
task(t224).
task(t225).
task(t226).
task(t227).
task(t228).
task(t229).
task(t230).
task(t231).
task(t232).
task(t233).
task(t234).
task(t235).
task(t236).
task(t237).
task(t238).
task(t239).
task(t240).
task(t241).
task(t242).
task(t243).
task(t244).
task(t245).
task(t246).
task(t247).
task(t248).
task(t249).
task(t250).
task(t251).
task(t252).
task(t253).
task(t254).
task(t255).
task(t256).
task(t257).
task(t258).
task(t259).
task(t260).
task(t261).
task(t262).
task(t263).
task(t264).
task(t265).

%%%%%%%%%%%%%%%%%%
%% Dependencies %%
%%%%%%%%%%%%%%%%%%
% The execution order dependencies between tasks
% depends_on(Ta,Tb,Data): before task 'Ta' can be executed, 
% task 'Tb' must have been executed and thereafter 'Data' megabytes of data (result of/produced by 'Tb') must have been moved from the processor that executed 'Tb' to the processor that will execute 'Ta'.

% %In this benchmark tasks are interdependent, but no data is communicated between tasks.
depends_on(t2,t1,0).
depends_on(t3,t2,0).
depends_on(t4,t3,0).
depends_on(t5,t4,0).
depends_on(t6,t5,0).
depends_on(t7,t5,0).
depends_on(t8,t6,0).
depends_on(t8,t7,0).
depends_on(t9,t4,0).
depends_on(t10,t9,0).
depends_on(t11,t9,0).
depends_on(t12,t11,0).
depends_on(t13,t11,0).
depends_on(t14,t12,0).
depends_on(t14,t13,0).
depends_on(t15,t10,0).
depends_on(t15,t14,0).
depends_on(t16,t8,0).
depends_on(t16,t15,0).
depends_on(t17,t3,0).
depends_on(t18,t17,0).
depends_on(t19,t18,0).
depends_on(t20,t18,0).
depends_on(t21,t20,0).
depends_on(t22,t20,0).
depends_on(t23,t21,0).
depends_on(t23,t22,0).
depends_on(t24,t19,0).
depends_on(t24,t23,0).
depends_on(t25,t17,0).
depends_on(t26,t25,0).
depends_on(t27,t26,0).
depends_on(t28,t26,0).
depends_on(t29,t27,0).
depends_on(t29,t28,0).
depends_on(t30,t25,0).
depends_on(t31,t30,0).
depends_on(t32,t30,0).
depends_on(t33,t32,0).
depends_on(t34,t32,0).
depends_on(t35,t33,0).
depends_on(t35,t34,0).
depends_on(t36,t31,0).
depends_on(t36,t35,0).
depends_on(t37,t29,0).
depends_on(t37,t36,0).
depends_on(t38,t24,0).
depends_on(t38,t37,0).
depends_on(t39,t16,0).
depends_on(t39,t38,0).
depends_on(t40,t2,0).
depends_on(t41,t40,0).
depends_on(t42,t41,0).
depends_on(t43,t42,0).
depends_on(t44,t42,0).
depends_on(t45,t44,0).
depends_on(t46,t44,0).
depends_on(t47,t45,0).
depends_on(t47,t46,0).
depends_on(t48,t43,0).
depends_on(t48,t47,0).
depends_on(t49,t41,0).
depends_on(t50,t49,0).
depends_on(t51,t50,0).
depends_on(t52,t50,0).
depends_on(t53,t51,0).
depends_on(t53,t52,0).
depends_on(t54,t49,0).
depends_on(t55,t54,0).
depends_on(t56,t54,0).
depends_on(t57,t56,0).
depends_on(t58,t56,0).
depends_on(t59,t57,0).
depends_on(t59,t58,0).
depends_on(t60,t55,0).
depends_on(t60,t59,0).
depends_on(t61,t53,0).
depends_on(t61,t60,0).
depends_on(t62,t48,0).
depends_on(t62,t61,0).
depends_on(t63,t40,0).
depends_on(t64,t63,0).
depends_on(t65,t64,0).
depends_on(t66,t65,0).
depends_on(t67,t65,0).
depends_on(t68,t66,0).
depends_on(t68,t67,0).
depends_on(t69,t64,0).
depends_on(t70,t69,0).
depends_on(t71,t69,0).
depends_on(t72,t71,0).
depends_on(t73,t71,0).
depends_on(t74,t72,0).
depends_on(t74,t73,0).
depends_on(t75,t70,0).
depends_on(t75,t74,0).
depends_on(t76,t68,0).
depends_on(t76,t75,0).
depends_on(t77,t63,0).
depends_on(t78,t77,0).
depends_on(t79,t78,0).
depends_on(t80,t78,0).
depends_on(t81,t80,0).
depends_on(t82,t80,0).
depends_on(t83,t81,0).
depends_on(t83,t82,0).
depends_on(t84,t79,0).
depends_on(t84,t83,0).
depends_on(t85,t77,0).
depends_on(t86,t85,0).
depends_on(t87,t86,0).
depends_on(t88,t86,0).
depends_on(t89,t87,0).
depends_on(t89,t88,0).
depends_on(t90,t85,0).
depends_on(t91,t90,0).
depends_on(t92,t90,0).
depends_on(t93,t92,0).
depends_on(t94,t92,0).
depends_on(t95,t93,0).
depends_on(t95,t94,0).
depends_on(t96,t91,0).
depends_on(t96,t95,0).
depends_on(t97,t89,0).
depends_on(t97,t96,0).
depends_on(t98,t84,0).
depends_on(t98,t97,0).
depends_on(t99,t76,0).
depends_on(t99,t98,0).
depends_on(t100,t62,0).
depends_on(t100,t99,0).
depends_on(t101,t39,0).
depends_on(t101,t100,0).
depends_on(t102,t1,0).
depends_on(t103,t102,0).
depends_on(t104,t103,0).
depends_on(t105,t104,0).
depends_on(t106,t105,0).
depends_on(t107,t105,0).
depends_on(t108,t107,0).
depends_on(t109,t107,0).
depends_on(t110,t108,0).
depends_on(t110,t109,0).
depends_on(t111,t106,0).
depends_on(t111,t110,0).
depends_on(t112,t104,0).
depends_on(t113,t112,0).
depends_on(t114,t113,0).
depends_on(t115,t113,0).
depends_on(t116,t114,0).
depends_on(t116,t115,0).
depends_on(t117,t112,0).
depends_on(t118,t117,0).
depends_on(t119,t117,0).
depends_on(t120,t119,0).
depends_on(t121,t119,0).
depends_on(t122,t120,0).
depends_on(t122,t121,0).
depends_on(t123,t118,0).
depends_on(t123,t122,0).
depends_on(t124,t116,0).
depends_on(t124,t123,0).
depends_on(t125,t111,0).
depends_on(t125,t124,0).
depends_on(t126,t103,0).
depends_on(t127,t126,0).
depends_on(t128,t127,0).
depends_on(t129,t128,0).
depends_on(t130,t128,0).
depends_on(t131,t129,0).
depends_on(t131,t130,0).
depends_on(t132,t127,0).
depends_on(t133,t132,0).
depends_on(t134,t132,0).
depends_on(t135,t134,0).
depends_on(t136,t134,0).
depends_on(t137,t135,0).
depends_on(t137,t136,0).
depends_on(t138,t133,0).
depends_on(t138,t137,0).
depends_on(t139,t131,0).
depends_on(t139,t138,0).
depends_on(t140,t126,0).
depends_on(t141,t140,0).
depends_on(t142,t141,0).
depends_on(t143,t141,0).
depends_on(t144,t143,0).
depends_on(t145,t143,0).
depends_on(t146,t144,0).
depends_on(t146,t145,0).
depends_on(t147,t142,0).
depends_on(t147,t146,0).
depends_on(t148,t140,0).
depends_on(t149,t148,0).
depends_on(t150,t149,0).
depends_on(t151,t149,0).
depends_on(t152,t150,0).
depends_on(t152,t151,0).
depends_on(t153,t148,0).
depends_on(t154,t153,0).
depends_on(t155,t153,0).
depends_on(t156,t155,0).
depends_on(t157,t155,0).
depends_on(t158,t156,0).
depends_on(t158,t157,0).
depends_on(t159,t154,0).
depends_on(t159,t158,0).
depends_on(t160,t152,0).
depends_on(t160,t159,0).
depends_on(t161,t147,0).
depends_on(t161,t160,0).
depends_on(t162,t139,0).
depends_on(t162,t161,0).
depends_on(t163,t125,0).
depends_on(t163,t162,0).
depends_on(t164,t102,0).
depends_on(t165,t164,0).
depends_on(t166,t165,0).
depends_on(t167,t166,0).
depends_on(t168,t167,0).
depends_on(t169,t167,0).
depends_on(t170,t168,0).
depends_on(t170,t169,0).
depends_on(t171,t166,0).
depends_on(t172,t171,0).
depends_on(t173,t171,0).
depends_on(t174,t173,0).
depends_on(t175,t173,0).
depends_on(t176,t174,0).
depends_on(t176,t175,0).
depends_on(t177,t172,0).
depends_on(t177,t176,0).
depends_on(t178,t170,0).
depends_on(t178,t177,0).
depends_on(t179,t165,0).
depends_on(t180,t179,0).
depends_on(t181,t180,0).
depends_on(t182,t180,0).
depends_on(t183,t182,0).
depends_on(t184,t182,0).
depends_on(t185,t183,0).
depends_on(t185,t184,0).
depends_on(t186,t181,0).
depends_on(t186,t185,0).
depends_on(t187,t179,0).
depends_on(t188,t187,0).
depends_on(t189,t188,0).
depends_on(t190,t188,0).
depends_on(t191,t189,0).
depends_on(t191,t190,0).
depends_on(t192,t187,0).
depends_on(t193,t192,0).
depends_on(t194,t192,0).
depends_on(t195,t194,0).
depends_on(t196,t194,0).
depends_on(t197,t195,0).
depends_on(t197,t196,0).
depends_on(t198,t193,0).
depends_on(t198,t197,0).
depends_on(t199,t191,0).
depends_on(t199,t198,0).
depends_on(t200,t186,0).
depends_on(t200,t199,0).
depends_on(t201,t178,0).
depends_on(t201,t200,0).
depends_on(t202,t164,0).
depends_on(t203,t202,0).
depends_on(t204,t203,0).
depends_on(t205,t204,0).
depends_on(t206,t204,0).
depends_on(t207,t206,0).
depends_on(t208,t206,0).
depends_on(t209,t207,0).
depends_on(t209,t208,0).
depends_on(t210,t205,0).
depends_on(t210,t209,0).
depends_on(t211,t203,0).
depends_on(t212,t211,0).
depends_on(t213,t212,0).
depends_on(t214,t212,0).
depends_on(t215,t213,0).
depends_on(t215,t214,0).
depends_on(t216,t211,0).
depends_on(t217,t216,0).
depends_on(t218,t216,0).
depends_on(t219,t218,0).
depends_on(t220,t218,0).
depends_on(t221,t219,0).
depends_on(t221,t220,0).
depends_on(t222,t217,0).
depends_on(t222,t221,0).
depends_on(t223,t215,0).
depends_on(t223,t222,0).
depends_on(t224,t210,0).
depends_on(t224,t223,0).
depends_on(t225,t202,0).
depends_on(t226,t225,0).
depends_on(t227,t226,0).
depends_on(t228,t227,0).
depends_on(t229,t227,0).
depends_on(t230,t228,0).
depends_on(t230,t229,0).
depends_on(t231,t226,0).
depends_on(t232,t231,0).
depends_on(t233,t231,0).
depends_on(t234,t233,0).
depends_on(t235,t233,0).
depends_on(t236,t234,0).
depends_on(t236,t235,0).
depends_on(t237,t232,0).
depends_on(t237,t236,0).
depends_on(t238,t230,0).
depends_on(t238,t237,0).
depends_on(t239,t225,0).
depends_on(t240,t239,0).
depends_on(t241,t240,0).
depends_on(t242,t240,0).
depends_on(t243,t242,0).
depends_on(t244,t242,0).
depends_on(t245,t243,0).
depends_on(t245,t244,0).
depends_on(t246,t241,0).
depends_on(t246,t245,0).
depends_on(t247,t239,0).
depends_on(t248,t247,0).
depends_on(t249,t248,0).
depends_on(t250,t248,0).
depends_on(t251,t249,0).
depends_on(t251,t250,0).
depends_on(t252,t247,0).
depends_on(t253,t252,0).
depends_on(t254,t252,0).
depends_on(t255,t254,0).
depends_on(t256,t254,0).
depends_on(t257,t255,0).
depends_on(t257,t256,0).
depends_on(t258,t253,0).
depends_on(t258,t257,0).
depends_on(t259,t251,0).
depends_on(t259,t258,0).
depends_on(t260,t246,0).
depends_on(t260,t259,0).
depends_on(t261,t238,0).
depends_on(t261,t260,0).
depends_on(t262,t224,0).
depends_on(t262,t261,0).
depends_on(t263,t201,0).
depends_on(t263,t262,0).
depends_on(t264,t163,0).
depends_on(t264,t263,0).
depends_on(t265,t101,0).
depends_on(t265,t264,0).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   Processing Costs   %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specifies how long the processing of each task takes on each core.
% process_cost(T,C,Time): It takes 'Time' ms to execute task 'T' on core 'C'.

%In this benchmark any task takes as long on any core (i.e. homogeneous system)
process_cost(T,C,10) :- task(T), core(C).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%  Channel Properties  %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Specifies the properties of the communication channel between each of the cores
% channel(Ca,Cb,Latency,Bandwidth): The channel to communicate from core 'Ca' to core 'Cb' has a latency 'Latency' and bandwidth 'Bandwidth'.
% Note that sending 'X' megabytes of data, over a channel, takes Latency + X/Bandwidth ms.


%In this benchmark sending a given message take as long, independent of sender/recipient/message size (uniform access).
channel(C,C,15,1) :- !,core(C).
channel(C1,C2,15,1) :- C1 \= C2, core(C1), core(C2).